  backend:
    build:
      context: ../WebApplication1
      dockerfile: Dockerfile
    container_name: backend_voiture
    restart: always
    ports:
      - "8081:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=voiture_db;Username=kanto;Password=kanto2004
    depends_on:
      - postgres
    networks:
      - app-network
    volumes:
      - ../WebApplication1:/app  # ðŸ‘ˆ Ajout important pour voir les changements
      - /app/bin
      - /app/obj
  
  
  frontend:
    build:
      context: ../front
      dockerfile: Dockerfile.dev  # Utilise le Dockerfile de dÃ©veloppement
    container_name: frontend_voiture
    restart: always
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://backend:8080
    depends_on:
      - backend
    volumes:
      - ../front:/app  # Synchronise le rÃ©pertoire local avec le conteneur
      - /app/node_modules  # PrÃ©serve node_modules pour Ã©viter des conflits
    networks:
      - app-network